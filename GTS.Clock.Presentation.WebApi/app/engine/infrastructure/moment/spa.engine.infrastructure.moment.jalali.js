define(["spa.engine.infrastructure.moment"], function (t) { var n = function () { function t(t, n, e) { return o(u(t, n, e)) } function n(t, n, e) { return h(s(t, n, e)) } function e(t, n, e) { return t >= -61 && 3177 >= t && n >= 1 && 12 >= n && e >= 1 && e <= a(t, n) } function r(t) { return 0 === i(t).leap } function a(t, n) { return 6 >= n ? 31 : 11 >= n ? 30 : r(t) ? 30 : 29 } function i(t) { var n, e, r, a, i, s, o, u = [-61, 9, 38, 199, 426, 686, 756, 818, 1111, 1181, 1210, 1635, 2060, 2097, 2192, 2262, 2324, 2394, 2456, 3178], h = u.length, j = t + 621, l = -14, d = u[0]; if (d > t || t >= u[h - 1]) throw new Error("Invalid Jalaali year " + t); for (o = 1; h > o && (n = u[o], e = n - d, !(n > t)) ; o += 1) l = l + 8 * c(e, 33) + c(f(e, 33), 4), d = n; return s = t - d, l = l + 8 * c(s, 33) + c(f(s, 33) + 3, 4), 4 === f(e, 33) && e - s === 4 && (l += 1), a = c(j, 4) - c(3 * (c(j, 100) + 1), 4) - 150, i = 20 + l - a, 6 > e - s && (s = s - e + 33 * c(e + 4, 33)), r = f(f(s + 1, 33) - 1, 4), -1 === r && (r = 4), { leap: r, gy: j, march: i } } function s(t, n, e) { var r = i(t); return u(r.gy, 3, r.march) + 31 * (n - 1) - c(n, 7) * (n - 7) + e - 1 } function o(t) { var n, e, r, a = h(t).gy, s = a - 621, o = i(s), j = u(a, 3, o.march); if (r = t - j, r >= 0) { if (185 >= r) return e = 1 + c(r, 31), n = f(r, 31) + 1, { jy: s, jm: e, jd: n }; r -= 186 } else s -= 1, r += 179, 1 === o.leap && (r += 1); return e = 7 + c(r, 30), n = f(r, 30) + 1, { jy: s, jm: e, jd: n } } function u(t, n, e) { var r = c(1461 * (t + c(n - 8, 6) + 100100), 4) + c(153 * f(n + 9, 12) + 2, 5) + e - 34840408; return r = r - c(3 * c(t + 100100 + c(n - 8, 6), 100), 4) + 752 } function h(t) { var n, e, r, a, i; return n = 4 * t + 139361631, n = n + 4 * c(3 * c(4 * t + 183187720, 146097), 4) - 3908, e = 5 * c(f(n, 1461), 4) + 308, r = c(f(e, 153), 5) + 1, a = f(c(e, 153), 12) + 1, i = c(n, 1461) - 100100 + c(8 - a, 6), { gy: i, gm: a, gd: r } } function c(t, n) { return ~~(t / n) } function f(t, n) { return t - ~~(t / n) * n } return { toJalaali: t, toGregorian: n, isValidJalaaliDate: e, isLeapJalaaliYear: r, jalaaliMonthLength: a, jalCal: i, j2d: s, d2j: o, g2d: u, d2g: h } }(); return t = function (t, n) { function e(t, n) { return function (e) { return i(t.call(this, e), n) } } function r(t, n) { return function (e) { return this.localeData().ordinal(t.call(this, e), n) } } function a(t, n) { var e; for (e in n) n.hasOwnProperty(e) && (t[e] = n[e]); return t } function i(t, n) { for (var e = t + ""; e.length < n;) e = "0" + e; return e } function s(t) { return "[object Array]" === Object.prototype.toString.call(t) } function o(t) { if (t) { var n = t.toLowerCase(); t = x[n] || n } return t } function u(t, n, e, r) { var a = t._d; t._isUTC ? t._d = new Date(Date.UTC(n, e, r, a.getUTCHours(), a.getUTCMinutes(), a.getUTCSeconds(), a.getUTCMilliseconds())) : t._d = new Date(n, e, r, a.getHours(), a.getMinutes(), a.getSeconds(), a.getMilliseconds()) } function h(t) { function n() { } return n.prototype = t, new n } function c(t) { return Object.getPrototypeOf ? Object.getPrototypeOf(t) : "".__proto__ ? t.__proto__ : t.constructor.prototype } function f(t) { var n, e = t.match(L), r = e.length; for (n = 0; r > n; n += 1) G[e[n]] && (e[n] = G[e[n]]); return function (a) { var i = ""; for (n = 0; r > n; n += 1) i += e[n] instanceof Function ? "[" + e[n].call(a, t) + "]" : e[n]; return i } } function j(t, e) { switch (t) { case "jDDDD": return S; case "jYYYY": return T; case "jYYYYY": return b; case "jDDD": return O; case "jMMM": case "jMMMM": return P; case "jMM": case "jDD": case "jYY": case "jM": case "jD": return F; case "DDDD": return S; case "YYYY": return T; case "YYYYY": return b; case "S": case "SS": case "SSS": case "DDD": return O; case "MMM": case "MMMM": case "dd": case "ddd": case "dddd": return P; case "a": case "A": return n.localeData(e._l)._meridiemParse; case "X": return A; case "Z": case "ZZ": return W; case "T": return C; case "MM": case "DD": case "YY": case "HH": case "hh": case "mm": case "ss": case "M": case "D": case "d": case "H": case "h": case "m": case "s": return F; default: return new RegExp(t.replace("\\", "")) } } function l(t, e, r) { var a, i = r._a; switch (t) { case "jM": case "jMM": i[1] = null == e ? 0 : ~~e - 1; break; case "jMMM": case "jMMMM": a = n.localeData(r._l).jMonthsParse(e), null != a ? i[1] = a : r._isValid = !1; break; case "jD": case "jDD": case "jDDD": case "jDDDD": null != e && (i[2] = ~~e); break; case "jYY": i[0] = ~~e + (~~e > 47 ? 1300 : 1400); break; case "jYYYY": case "jYYYYY": i[0] = ~~e } null == e && (r._isValid = !1) } function d(t) { var n, e, r = t._a[0], a = t._a[1], i = t._a[2]; return null == r && null == a && null == i ? [0, 0, 1] : (r = null != r ? r : 0, a = null != a ? a : 0, i = null != i ? i : 1, (1 > i || i > m.jDaysInMonth(r, a) || 0 > a || a > 11) && (t._isValid = !1), n = p(r, a, i), e = y(n.gy, n.gm, n.gd), t._jDiff = 0, ~~e.jy !== r && (t._jDiff += 1), ~~e.jm !== a && (t._jDiff += 1), ~~e.jd !== i && (t._jDiff += 1), [n.gy, n.gm, n.gd]) } function _(t) { var n, e, r, a = t._f.match(L), i = t._i + "", s = a.length; for (t._a = [], n = 0; s > n; n += 1) e = a[n], r = (j(e, t).exec(i) || [])[0], r && (i = i.slice(i.indexOf(r) + r.length)), G[e] && l(e, r, t); return i && (t._il = i), d(t) } function M(t, n) { var e, r, a, i, s, o, u = t._f.length; if (0 === u) return g(new Date(NaN)); for (e = 0; u > e; e += 1) r = t._f[e], s = 0, a = g(t._i, r, t._l, t._strict, n), a.isValid() && (s += a._jDiff, a._il && (s += a._il.length), (null == o || o > s) && (o = s, i = a)); return i } function D(t) { var n, e, r, a = t._i + "", i = "", s = "", o = t._f.match(L), u = o.length; for (n = 0; u > n; n += 1) e = o[n], r = (j(e, t).exec(a) || [])[0], r && (a = a.slice(a.indexOf(r) + r.length)), G[e] instanceof Function || (s += e, r && (i += r)); t._i = i, t._f = s } function Y(t, n, e) { var r, a = e - n, i = e - t.day(); return i > a && (i -= 7), a - 7 > i && (i += 7), r = m(t).add(i, "d"), { week: Math.ceil(r.jDayOfYear() / 7), year: r.jYear() } } function g(t, e, r, o, u) { "boolean" == typeof r && (u = o, o = r, r = void 0); var c, f, j, l = { _i: t, _f: e, _l: r, _strict: o, _isUTC: u }, d = t, Y = e; if (e) { if (s(e)) return M(l, u); c = _(l), D(l), e = "YYYY-MM-DD-" + l._f, t = i(c[0], 4) + "-" + i(c[1] + 1, 2) + "-" + i(c[2], 2) + "-" + l._i } return f = u ? n.utc(t, e, r, o) : n(t, e, r, o), l._isValid === !1 && (f._isValid = !1), f._jDiff = l._jDiff || 0, j = h(m.fn), a(j, f), o && j.isValid() && (j._isValid = j.format(Y) === d), j } function m(t, n, e, r) { return g(t, n, e, r, !1) } function y(n, e, r) { var a = t.toJalaali(n, e + 1, r); return a.jm -= 1, a } function p(n, e, r) { var a = t.toGregorian(n, e + 1, r); return a.gm -= 1, a } function v(t, n) { return ~~(t / n) } function w(t, n) { return t - ~~(t / n) * n } var L = /(\[[^\[]*\])|(\\)?j(Mo|MM?M?M?|Do|DDDo|DD?D?D?|w[o|w]?|YYYYY|YYYY|YY|gg(ggg?)?|)|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g, k = /(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g, F = /\d\d?/, O = /\d{1,3}/, S = /\d{3}/, T = /\d{1,4}/, b = /[+\-]?\d{1,6}/, P = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, W = /Z|[\+\-]\d\d:?\d\d/i, C = /T/i, A = /[\+\-]?\d+(\.\d{1,3})?/, x = { jm: "jmonth", jmonths: "jmonth", jy: "jyear", jyears: "jyear" }, H = {}, V = "DDD w M D".split(" "), E = "M D w".split(" "), G = { jM: function () { return this.jMonth() + 1 }, jMMM: function (t) { return this.localeData().jMonthsShort(this, t) }, jMMMM: function (t) { return this.localeData().jMonths(this, t) }, jD: function () { return this.jDate() }, jDDD: function () { return this.jDayOfYear() }, jw: function () { return this.jWeek() }, jYY: function () { return i(this.jYear() % 100, 2) }, jYYYY: function () { return i(this.jYear(), 4) }, jYYYYY: function () { return i(this.jYear(), 5) }, jgg: function () { return i(this.jWeekYear() % 100, 2) }, jgggg: function () { return this.jWeekYear() }, jggggg: function () { return i(this.jWeekYear(), 5) } }; return function () { for (var t; V.length;) t = V.pop(), G["j" + t + "o"] = r(G["j" + t], t); for (; E.length;) t = E.pop(), G["j" + t + t] = e(G["j" + t], 2); G.jDDDD = e(G.jDDD, 3) }(), a(c(n.localeData()), { _jMonths: ["Farvardin", "Ordibehesht", "Khordaad", "Tir", "Amordaad", "Shahrivar", "Mehr", "Aabaan", "Aazar", "Dey", "Bahman", "Esfand"], jMonths: function (t) { return this._jMonths[t.jMonth()] }, _jMonthsShort: ["Far", "Ord", "Kho", "Tir", "Amo", "Sha", "Meh", "Aab", "Aaz", "Dey", "Bah", "Esf"], jMonthsShort: function (t) { return this._jMonthsShort[t.jMonth()] }, jMonthsParse: function (t) { var n, e, r; for (this._jMonthsParse || (this._jMonthsParse = []), n = 0; 12 > n; n += 1) if (this._jMonthsParse[n] || (e = m([2e3, (2 + n) % 12, 25]), r = "^" + this.jMonths(e, "") + "|^" + this.jMonthsShort(e, ""), this._jMonthsParse[n] = new RegExp(r.replace(".", ""), "i")), this._jMonthsParse[n].test(t)) return n } }), a(m, n), m.fn = h(n.fn), m.utc = function (t, n, e, r) { return g(t, n, e, r, !0) }, m.unix = function (t) { return g(1e3 * t) }, m.fn.format = function (t) { var e, r, a = this; if (t) { for (e = 5, r = function (t) { return a.localeData().longDateFormat(t) || t }; e > 0 && k.test(t) ;) e -= 1, t = t.replace(k, r); H[t] || (H[t] = f(t)), t = H[t](this) } return n.fn.format.call(this, t) }, m.fn.jYear = function (t) { var e, r, a; return "number" == typeof t ? (r = y(this.year(), this.month(), this.date()), e = Math.min(r.jd, m.jDaysInMonth(t, r.jm)), a = p(t, r.jm, e), u(this, a.gy, a.gm, a.gd), n.updateOffset(this), this) : y(this.year(), this.month(), this.date()).jy }, m.fn.jMonth = function (t) { var e, r, a; return null != t ? "string" == typeof t && (t = this.lang().jMonthsParse(t), "number" != typeof t) ? this : (r = y(this.year(), this.month(), this.date()), e = Math.min(r.jd, m.jDaysInMonth(r.jy, t)), this.jYear(r.jy + v(t, 12)), t = w(t, 12), 0 > t && (t += 12, this.jYear(this.jYear() - 1)), a = p(this.jYear(), t, e), u(this, a.gy, a.gm, a.gd), n.updateOffset(this), this) : y(this.year(), this.month(), this.date()).jm }, m.fn.jDate = function (t) { var e, r; return "number" == typeof t ? (e = y(this.year(), this.month(), this.date()), r = p(e.jy, e.jm, t), u(this, r.gy, r.gm, r.gd), n.updateOffset(this), this) : y(this.year(), this.month(), this.date()).jd }, m.fn.jDayOfYear = function (t) { var n = Math.round((m(this).startOf("day") - m(this).startOf("jYear")) / 864e5) + 1; return null == t ? n : this.add(t - n, "d") }, m.fn.jWeek = function (t) { var n = Y(this, this.localeData()._week.dow, this.localeData()._week.doy).week; return null == t ? n : this.add(7 * (t - n), "d") }, m.fn.jWeekYear = function (t) { var n = Y(this, this.localeData()._week.dow, this.localeData()._week.doy).year; return null == t ? n : this.add(t - n, "y") }, m.fn.add = function (t, e) { var r; return null === e || isNaN(+e) || (r = t, t = e, e = r), e = o(e), "jyear" === e ? this.jYear(this.jYear() + t) : "jmonth" === e ? this.jMonth(this.jMonth() + t) : n.fn.add.call(this, t, e), this }, m.fn.subtract = function (t, e) { var r; return null === e || isNaN(+e) || (r = t, t = e, e = r), e = o(e), "jyear" === e ? this.jYear(this.jYear() - t) : "jmonth" === e ? this.jMonth(this.jMonth() - t) : n.fn.subtract.call(this, t, e), this }, m.fn.startOf = function (t) { return t = o(t), "jyear" === t || "jmonth" === t ? ("jyear" === t && this.jMonth(0), this.jDate(1), this.hours(0), this.minutes(0), this.seconds(0), this.milliseconds(0), this) : n.fn.startOf.call(this, t) }, m.fn.endOf = function (t) { return t = o(t), void 0 === t || "milisecond" === t ? this : this.startOf(t).add(1, "isoweek" === t ? "week" : t).subtract(1, "ms") }, m.fn.clone = function () { return m(this) }, m.fn.jYears = m.fn.jYear, m.fn.jMonths = m.fn.jMonth, m.fn.jDates = m.fn.jDate, m.fn.jWeeks = m.fn.jWeek, m.jDaysInMonth = function (t, n) { return t += v(n, 12), n = w(n, 12), 0 > n && (n += 12, t -= 1), 6 > n ? 31 : 11 > n ? 30 : m.jIsLeapYear(t) ? 30 : 29 }, m.jIsLeapYear = t.isLeapJalaaliYear, m.loadPersian = function () { n.locale("fa", { months: "ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"), monthsShort: "ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"), weekdays: "یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_آدینه_شنبه".split("_"), weekdaysShort: "یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_آدینه_شنبه".split("_"), weekdaysMin: "ی_د_س_چ_پ_آ_ش".split("_"), longDateFormat: { LT: "HH:mm", L: "jYYYY/jMM/jDD", LL: "jD jMMMM jYYYY", LLL: "jD jMMMM jYYYY LT", LLLL: "dddd، jD jMMMM jYYYY LT" }, calendar: { sameDay: "[امروز ساعت] LT", nextDay: "[فردا ساعت] LT", nextWeek: "dddd [ساعت] LT", lastDay: "[دیروز ساعت] LT", lastWeek: "dddd [ی پیش ساعت] LT", sameElse: "L" }, relativeTime: { future: "در %s", past: "%s پیش", s: "چند ثانیه", m: "1 دقیقه", mm: "%d دقیقه", h: "1 ساعت", hh: "%d ساعت", d: "1 روز", dd: "%d روز", M: "1 ماه", MM: "%d ماه", y: "1 سال", yy: "%d سال" }, ordinal: "%dم", week: { dow: 6, doy: 12 }, meridiem: function (t) { return 12 > t ? "ق.ظ" : "ب.ظ" }, jMonths: "فروردین_اردیبهشت_خرداد_تیر_امرداد_شهریور_مهر_آبان_آذر_دی_بهمن_اسفند".split("_"), jMonthsShort: "فرو_ارد_خرد_تیر_امر_شهر_مهر_آبا_آذر_دی_بهم_اسف".split("_") }) }, m.jConvert = { toJalaali: y, toGregorian: p }, m }(n, t) });